# Configuração do Banco de Dados Supabase (Novo Schema)

Para que o aplicativo funcione com a nova estrutura, execute os comandos SQL abaixo no painel do Supabase ("SQL Editor").

## 1. Tabela Pacientes
```sql
create table public.paciente (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  nome_completo text,
  documento_registro text,
  codigo text unique, -- Usado para relações
  identificador text,
  data_de_nascimento date,
  internado boolean,
  comorbidades text,
  alergias text
);
```

## 2. Tabela Colaboradores (Médicos e outros)
```sql
create table public.colaboradores (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  identificador text unique,
  funcao text, -- Ex: 'Medico'
  externo boolean,
  nome_completo text,
  registro_empresa text,
  telefone text,
  registro_profissional text,
  numero_registro text,
  identificador_usuario uuid references auth.users(id)
);
```

## 3. Tabela Internações
```sql
create table public.internacoes (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  identificador text unique,
  identificador_paciente text references public.paciente(codigo),
  convenio text,
  quarto text,
  leito text,
  identificador_usuario uuid references auth.users(id)
);
```

## 4. Tabela Prescrições
```sql
create table public.prescricoes (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  identificador text unique,
  identificado_medico uuid references auth.users(id),
  id_paciente text references public.paciente(codigo),
  quarto text,
  leito text,
  registro_prontuario text,
  convenio text,
  hra_inicio timestamp with time zone,
  hra_final timestamp with time zone,
  status text,
  tipo text,
  data_prescricao date,
  prescricao_original text
);
```

## 5. Dados de Exemplo (Para Teste)
```sql
-- Inserir Paciente
insert into public.paciente (nome_completo, codigo, data_de_nascimento, internado)
values ('Maria Silva', 'PAC001', '1980-05-15', true);

-- Inserir Internação para o Paciente
insert into public.internacoes (identificador_paciente, quarto, leito, convenio)
values ('PAC001', '101', 'A', 'Unimed');

-- Inserir Médico (Colaborador)
insert into public.colaboradores (nome_completo, funcao, identificador)
values ('Dr. João', 'Medico', 'MED001');
```
